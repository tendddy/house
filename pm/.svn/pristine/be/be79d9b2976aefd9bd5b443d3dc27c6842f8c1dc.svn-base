<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cninsure.payment.entity">
	<resultMap id="PMLogRecordsMap1" type="com.cninsure.payment.entity.PMLogRecords">
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="createdate" property="createdate" jdbcType="TIMESTAMP" />
		<result column="modifydate" property="modifydate" jdbcType="TIMESTAMP" />
		<result column="app_id" property="appId" jdbcType="BIGINT" />
		<result column="payment_id" property="paymentId" jdbcType="BIGINT" />
		<result column="bankcard_id" property="bankcardId" jdbcType="BIGINT" />
		<result column="app_orderid" property="appOrderid" jdbcType="VARCHAR" />
		<result column="platform_user_id" property="platformUserId" jdbcType="VARCHAR" />
		<result column="product_id" property="productId" jdbcType="BIGINT" />
		<result column="interface_type" property="interfaceType" jdbcType="INTEGER" />
		<result column="interface_name" property="interfaceName" jdbcType="VARCHAR" />
		<result column="interface_method" property="interfaceMethod" jdbcType="VARCHAR" />
		<result column="unencrypted_params" property="unencryptedParams" jdbcType="VARCHAR" />
		<result column="request_params" property="requestParams" jdbcType="VARCHAR" />
		<result column="response_params" property="responseParams" jdbcType="VARCHAR" />
		<result column="exceptions" property="exceptions" jdbcType="VARCHAR" />
		<result column="status" property="status" jdbcType="CHAR" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
	</resultMap>
	<sql id="PMLogRecords_Base_Column_List">
		id, createdate, modifydate, app_id, payment_id,bankcard_id, app_orderid, platform_user_id, product_id,
		interface_type, interface_name, interface_method, unencrypted_params,request_params, response_params,
		exceptions,
		`status`, remark
	</sql>
	<select id="selectByPrimaryKey" resultMap="PMLogRecordsMap1" parameterType="java.lang.Long">
		select
		<include refid="PMLogRecords_Base_Column_List" />
		from PMLogRecords
		where id = #{id,jdbcType=BIGINT}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		delete from PMLogRecords
		where id = #{id,jdbcType=BIGINT}
	</delete>
	<insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.cninsure.payment.entity.PMLogRecords">
		insert into PMLogRecords (
		createdate, modifydate,
		app_id, payment_id,bankcard_id, app_orderid,
		platform_user_id, product_id, interface_type,
		interface_name, interface_method,unencrypted_params, request_params,
		response_params, exceptions, `status`,
		remark)
		values (sysdate(), null,
		#{appId,jdbcType=BIGINT}, #{paymentId,jdbcType=BIGINT},#{bankcardId,jdbcType=BIGINT},
		#{appOrderid,jdbcType=VARCHAR},
		#{platformUserId,jdbcType=VARCHAR}, #{productId,jdbcType=BIGINT},
		#{interfaceType,jdbcType=INTEGER},
		#{interfaceName,jdbcType=VARCHAR}, #{interfaceMethod,jdbcType=VARCHAR},
		#{unencryptedParams,jdbcType=VARCHAR},
		#{requestParams,jdbcType=VARCHAR},
		#{responseParams,jdbcType=VARCHAR},
		#{exceptions,jdbcType=VARCHAR}, #{status,jdbcType=CHAR},
		#{remark,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.cninsure.payment.entity.PMLogRecords">
		<selectKey resultType="java.lang.Long" keyProperty="id" order="BEFORE">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into PMLogRecords
		<trim prefix="(" suffix=")" suffixOverrides=",">
			id,
			<if test="createdate != null">
				createdate,
			</if>
			<if test="modifydate != null">
				modifydate,
			</if>
			<if test="appId != null">
				app_id,
			</if>
			<if test="paymentId != null">
				payment_id,
			</if>
			<if test="bankcardId != null">
				bankcard_id,
			</if>
			<if test="appOrderid != null">
				app_orderid,
			</if>
			<if test="platformUserId != null">
				platform_user_id,
			</if>
			<if test="productId != null">
				product_id,
			</if>
			<if test="interfaceType != null">
				interface_type,
			</if>
			<if test="interfaceName != null">
				interface_name,
			</if>
			<if test="interfaceMethod != null">
				interface_method,
			</if>
			<if test="unencryptedParams != null">
				unencrypted_params,
			</if>
			<if test="requestParams != null">
				request_params,
			</if>
			<if test="responseParams != null">
				response_params,
			</if>
			<if test="exceptions != null">
				exceptions,
			</if>
			<if test="status != null">
				`status`,
			</if>
			<if test="remark != null">
				remark,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			#{id,jdbcType=BIGINT},
			<if test="createdate != null">
				#{createdate,jdbcType=TIMESTAMP},
			</if>
			<if test="modifydate != null">
				#{modifydate,jdbcType=TIMESTAMP},
			</if>
			<if test="appId != null">
				#{appId,jdbcType=BIGINT},
			</if>
			<if test="paymentId != null">
				#{paymentId,jdbcType=BIGINT},
			</if>
			<if test="appOrderid != null">
				#{appOrderid,jdbcType=VARCHAR},
			</if>
			<if test="platformUserId != null">
				#{platformUserId,jdbcType=VARCHAR},
			</if>
			<if test="productId != null">
				#{productId,jdbcType=BIGINT},
			</if>
			<if test="interfaceType != null">
				#{interfaceType,jdbcType=INTEGER},
			</if>
			<if test="interfaceName != null">
				#{interfaceName,jdbcType=VARCHAR},
			</if>
			<if test="interfaceMethod != null">
				#{interfaceMethod,jdbcType=VARCHAR},
			</if>
			<if test="requestParams != null">
				#{requestParams,jdbcType=VARCHAR},
			</if>
			<if test="responseParams != null">
				#{responseParams,jdbcType=VARCHAR},
			</if>
			<if test="exceptions != null">
				#{exceptions,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				#{status,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.cninsure.payment.entity.PMLogRecords">
		update PMLogRecords
		<set>
			<if test="createdate != null">
				createdate = #{createdate,jdbcType=TIMESTAMP},
			</if>
			<if test="modifydate != null">
				modifydate = #{modifydate,jdbcType=TIMESTAMP},
			</if>
			<if test="appId != null">
				app_id = #{appId,jdbcType=BIGINT},
			</if>
			<if test="paymentId != null">
				payment_id = #{paymentId,jdbcType=BIGINT},
			</if>
			<if test="bankcardId != null">
				bankcard_id = #{bankcardId,jdbcType=BIGINT},
			</if>
			<if test="appOrderid != null">
				app_orderid = #{appOrderid,jdbcType=VARCHAR},
			</if>
			<if test="platformUserId != null">
				platform_user_id = #{platformUserId,jdbcType=VARCHAR},
			</if>
			<if test="productId != null">
				product_id = #{productId,jdbcType=BIGINT},
			</if>
			<if test="interfaceType != null">
				interface_type = #{interfaceType,jdbcType=INTEGER},
			</if>
			<if test="interfaceName != null">
				interface_name = #{interfaceName,jdbcType=VARCHAR},
			</if>
			<if test="interfaceMethod != null">
				interface_method = #{interfaceMethod,jdbcType=VARCHAR},
			</if>
			<if test="unencryptedParams != null">
				unencrypted_params = #{unencryptedParams,jdbcType=VARCHAR},
			</if>
			<if test="requestParams != null">
				request_params = #{requestParams,jdbcType=VARCHAR},
			</if>
			<if test="responseParams != null">
				response_params = #{responseParams,jdbcType=VARCHAR},
			</if>
			<if test="exceptions != null">
				exceptions = #{exceptions,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				`status` = #{status,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.cninsure.payment.entity.PMLogRecords">
		update PMLogRecords
		set createdate =
		#{createdate,jdbcType=TIMESTAMP},
		modifydate = #{modifydate,jdbcType=TIMESTAMP},
		app_id = #{appId,jdbcType=BIGINT},
		payment_id = #{paymentId,jdbcType=BIGINT},
		bankcard_id = #{bankcardId,jdbcType=BIGINT},
		app_orderid =
		#{appOrderid,jdbcType=VARCHAR},
		platform_user_id = #{platformUserId,jdbcType=VARCHAR},
		product_id =
		#{productId,jdbcType=BIGINT},
		interface_type = #{interfaceType,jdbcType=INTEGER},
		interface_name =
		#{interfaceName,jdbcType=VARCHAR},
		interface_method = #{interfaceMethod,jdbcType=VARCHAR},
		unencrypted_params =
		#{unencryptedParams,jdbcType=VARCHAR},
		request_params = #{requestParams,jdbcType=VARCHAR},
		response_params =
		#{responseParams,jdbcType=VARCHAR},
		exceptions = #{exceptions,jdbcType=VARCHAR},
		`status` = #{status,jdbcType=CHAR},
		remark = #{remark,jdbcType=VARCHAR}
		where id = #{id,jdbcType=BIGINT}
	</update>


	<insert id="PMLogRecords_insertLogRecords" useGeneratedKeys="true" keyProperty="id"
		parameterType="com.cninsure.payment.entity.PMLogRecords">
		insert into PMLogRecords ( createdate, modifydate,
		app_id, payment_id,bankcard_id, app_orderid,
		platform_user_id, product_id, interface_type,
		interface_name, interface_method, unencrypted_params, request_params,
		response_params, exceptions, `status`,
		remark)
		values (sysdate(), null,
		#{appId,jdbcType=BIGINT},
		#{paymentId,jdbcType=BIGINT},#{bankcardId,jdbcType=BIGINT}, #{appOrderid,jdbcType=VARCHAR},
		#{platformUserId,jdbcType=VARCHAR}, #{productId,jdbcType=BIGINT}, #{interfaceType,jdbcType=INTEGER},
		#{interfaceName,jdbcType=VARCHAR}, #{interfaceMethod,jdbcType=VARCHAR}, #{unencryptedParams,jdbcType=VARCHAR},
		#{requestParams,jdbcType=VARCHAR},
		#{responseParams,jdbcType=VARCHAR}, #{exceptions,jdbcType=VARCHAR}, '0',
		#{remark,jdbcType=VARCHAR})
	</insert>
	<update id="PMLogRecords_updateLogStatusById" parameterType="Map">
		update PMLogRecords
		set
		modifydate = sysdate(),
		`status` = '1',remark='接口最后查询成功'
		where id = #{id }
	</update>
	<update id="PMLogRecords_updateLogRecordsOfResponse" parameterType="Map">
		update PMLogRecords
		set
		modifydate = sysdate(),
		<if test=" remark != null and remark != '' ">
			remark = #{remark },
		</if>
		response_params = #{responseParams }
		where id = #{id }
	</update>

	<select id="PMLogRecords_select" parameterType="Map" resultMap="PMLogRecordsMap1">
		select
		<include refid="PMLogRecords_Base_Column_List" />
		from PMLogRecords
		<where>
			<if test="id != null">
				and id = #{id, jdbcType=BIGINT}
			</if>
			<if test="createdate != null">
				and createdate = #{createdate, jdbcType=TIMESTAMP}
			</if>
			<if test="modifydate != null">
				and modifydate = #{modifydate, jdbcType=TIMESTAMP}
			</if>
			<if test="appId != null">
				and app_id = #{appId, jdbcType=BIGINT}
			</if>
			<if test="paymentId != null">
				and payment_id = #{paymentId, jdbcType=BIGINT}
			</if>
			<if test="bankcardId != null">
				and bankcard_id = #{bankcardId, jdbcType=BIGINT}
			</if>
			<if test="appOrderid != null">
				and app_orderid = #{appOrderid, jdbcType=VARCHAR}
			</if>
			<if test="platformUserId != null">
				and platform_user_id = #{platformUserId, jdbcType=VARCHAR}
			</if>
			<if test="productId != null">
				and product_id = #{productId, jdbcType=BIGINT}
			</if>
			<if test="interfaceType != null">
				and interface_type = #{interfaceType, jdbcType=INTEGER}
			</if>

			<if test="interfaceName != null">
				and interface_name = #{interfaceName, jdbcType=VARCHAR}
			</if>
			<if test="interfaceMethod != null">
				and interface_method = #{interfaceMethod, jdbcType=VARCHAR}
			</if>
			<if test="unencryptedParams != null">
				and unencrypted_params = #{unencryptedParams, jdbcType=CLOB}
			</if>
			<if test="requestParams != null">
				and request_params = #{requestParams, jdbcType=CLOB}
			</if>
			<if test="responseParams != null">
				and response_params = #{responseParams, jdbcType=CLOB}
			</if>
			<if test="exceptions != null">
				and exceptions = #{exceptions, jdbcType=CLOB}
			</if>
			<if test="status != null">
				and status = #{status, jdbcType=CHAR}
			</if>
			<if test="remark != null">
				and remark = #{remark, jdbcType=CLOB}
			</if>
		</where>
	</select>
	<update id="PMLogRecords_updateByIdSelective" parameterType="com.cninsure.payment.entity.PMLogRecords">
		update PMLogRecords
		<set>
			<if test="modifydate != null">
				modifydate = #{modifydate,jdbcType=TIMESTAMP},
			</if>
			<if test="appId != null">
				app_id = #{appId,jdbcType=BIGINT},
			</if>
			<if test="paymentId != null">
				payment_id = #{paymentId,jdbcType=BIGINT},
			</if>
			<if test="bankcardId != null">
				bankcard_id = #{bankcardId,jdbcType=BIGINT},
			</if>
			<if test="appOrderid != null">
				app_orderid = #{appOrderid,jdbcType=VARCHAR},
			</if>
			<if test="platformUserId != null">
				platform_user_id = #{platformUserId,jdbcType=VARCHAR},
			</if>
			<if test="productId != null">
				product_id = #{productId,jdbcType=BIGINT},
			</if>
			<if test="interfaceType != null">
				interface_type = #{interfaceType,jdbcType=INTEGER},
			</if>
			<if test="interfaceName != null">
				interface_name = #{interfaceName,jdbcType=VARCHAR},
			</if>
			<if test="interfaceMethod != null">
				interface_method = #{interfaceMethod,jdbcType=VARCHAR},
			</if>
			<if test="unencryptedParams != null">
				unencrypted_params = #{unencryptedParams,jdbcType=VARCHAR},
			</if>
			<if test="requestParams != null">
				request_params = #{requestParams,jdbcType=VARCHAR},
			</if>
			<if test="responseParams != null">
				response_params = #{responseParams,jdbcType=VARCHAR},
			</if>
			<if test="exceptions != null">
				exceptions = #{exceptions,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				`status` = #{status,jdbcType=CHAR},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	<select id="PMLogRecords_selectOne" parameterType="Map" resultMap="PMLogRecordsMap1">
		select
		<include refid="PMLogRecords_Base_Column_List" />
		from PMLogRecords
		<where>
			<if test="id != null">
				and id = #{id, jdbcType=BIGINT}
			</if>
			<if test="paymentId != null">
				and payment_id = #{paymentId, jdbcType=BIGINT}
			</if>
		</where>
		LIMIT 2
	</select>
	
	<select id="PMLogRecords_countUserVerifyTime" parameterType="Map" resultType="int">
		SELECT count(1) FROM pmlogrecords l WHERE createdate &gt;= #{startTime} and createdate &lt;= #{endTime} and l.status = #{status} and l.platform_user_id = #{appUserId} AND l.app_id = #{appId}
	</select>
	<select id="PMLogRecords_countCardVerifyTime" parameterType="Map" resultType="int">
		SELECT count(1) FROM pmlogrecords l WHERE createdate &gt;= #{startTime} and createdate &lt;= #{endTime} and l.bankcard_id = #{bankcardId}
	</select>
</mapper>