package com.cninsure.payment.controller.manager;

import javax.annotation.Resource;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

import com.cninsure.payment.model.BaseModel;
import com.cninsure.payment.service.PMAPPcustomwithdrawService;

@Controller
@RequestMapping("/withdraw/*")
public class WithdrawController {

	@Resource
	private PMAPPcustomwithdrawService customWithdrawService;

	/**
	 * 提现申请,审核通过（立即支付金额）,审核不通过账户余额返还
	 * 
	 * @param pmapcustomwithdrawId
	 *            提现申请id
	 * @param pmappcustomId
	 *            提现用户id
	 * @param protocolId
	 *            绑卡协议号
	 * @param status
	 *            审核状态
	 * @return
	 */
	@RequestMapping(value = "accountWithdrawVerify", method = RequestMethod.POST)
	@ResponseBody
	public BaseModel accountWithdrawVerify(@RequestParam(value = "pmapcustomwithdrawId", required = true) Long pmapcustomwithdrawId,
			@RequestParam(value = "pmappcustomId", required = true) Long pmappcustomId,
			@RequestParam(value = "protocolId", required = true) String protocolId,
			@RequestParam(value = "status", required = true) String status)
	{
		BaseModel baseModel = new BaseModel();
		try
		{
			baseModel = customWithdrawService.accountWithdrawVerify(pmapcustomwithdrawId, pmappcustomId, protocolId, status);
		}
		catch (Exception e)
		{
			e.printStackTrace();
			baseModel.setStatus("Error");
			baseModel.setMessage("操作失败");
		}
		return baseModel;
	}

}
