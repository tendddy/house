<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cninsure.payment.entity">
	<!-- PMAPPcustombill -->
	<resultMap id="PMAPPcustombillMap" type="com.cninsure.payment.entity.PMAPPcustombill">
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="operator" property="operator" jdbcType="VARCHAR" />
		<result column="createtime" property="createtime" jdbcType="TIMESTAMP" />
		<result column="modifytime" property="modifytime" jdbcType="TIMESTAMP" />
		<result column="noti" property="noti" jdbcType="VARCHAR" />
		<result column="pmappcustom_id" property="pmappcustom_id"
			jdbcType="BIGINT" />
		<result column="amount" property="amount" jdbcType="VARCHAR" />
		<result column="inorout" property="inorout" jdbcType="CHAR" />
		<result column="billtype" property="billtype" jdbcType="CHAR" />
		<result column="billdate" property="billdate" jdbcType="TIMESTAMP" />
	</resultMap>
	<insert id="PMAPPcustombill_insert" parameterType="com.cninsure.payment.entity.PMAPPcustombill"
		useGeneratedKeys="true" keyProperty="id">
		insert into PMAPPcustombill
		(operator,createtime,modifytime,noti,pmappcustom_id,amount,inorout,billtype,billdate)
		values
		(#{operator},#{createtime},#{modifytime},#{noti},#{pmappcustom_id},#{amount},#{inorout},#{billtype},#{billdate})
	</insert>
	<select id="PMAPPcustombill_select" parameterType="Map"
		resultType="com.cninsure.payment.entity.PMAPPcustombill">
		select * from PMAPPcustombill
		<where>
			<if test="pmappcustom_id != null">
				and pmappcustom_id = #{pmappcustom_id}
			</if>
			<if test="amount != null">
				and amount = #{amount}
			</if>
			<if test="inorout != null">
				and inorout = #{inorout}
			</if>
			<if test="billtype != null">
				and billtype = #{billtype}
			</if>
			<if test="billdate != null">
				and billdate = #{billdate}
			</if>
		</where>
	</select>
	<select id="PMAPPcustombill_selectById" parameterType="String"
		resultType="com.cninsure.payment.entity.PMAPPcustombill">
		select * from PMAPPcustombill where id = #{id}
	</select>
	<select id="PMAPPcustombill_deleteById" parameterType="String">
		delete
		from PMAPPcustombill where id = #{id}
	</select>
	<select id="PMAPPcustombill_updateById" parameterType="com.cninsure.payment.entity.PMAPPcustombill">
		update
		PMAPPcustombill set operator = #{operator},modifytime =
		#{modifytime},noti = #{noti},pmappcustom_id = #{pmappcustom_id},amount
		= #{amount},inorout = #{inorout},billtype = #{billtype},billdate =
		#{billdate} where id = #{id}
	</select>
	<select id="PMAPPcustombill_selectCount" parameterType="Map"
		resultType="Long">
		select count(1) from PMAPPcustombill
		<where>
			<if test="pmappcustom_id != null">
				and pmappcustom_id = #{pmappcustom_id}
			</if>
			<if test="amount != null">
				and amount = #{amount}
			</if>
			<if test="inorout != null">
				and inorout = #{inorout}
			</if>
			<if test="billtype != null">
				and billtype = #{billtype}
			</if>
			<if test="billdate != null">
				and billdate = #{billdate}
			</if>
		</where>
	</select>
	<select id="PMAPPcustombill_selectOne" parameterType="Map"
		resultType="com.cninsure.payment.entity.PMAPPcustombill">
		select * from PMAPPcustombill
		<where>
			<if test="pmappcustom_id != null">
				and pmappcustom_id = #{pmappcustom_id}
			</if>
			<if test="amount != null">
				and amount = #{amount}
			</if>
			<if test="inorout != null">
				and inorout = #{inorout}
			</if>
			<if test="billtype != null">
				and billtype = #{billtype}
			</if>
			<if test="billdate != null">
				and billdate = #{billdate}
			</if>
		</where>
		LIMIT 2
	</select>

	<select id="PMAPPcustombill_queryAccountBill" parameterType="Map"
		resultType="com.cninsure.payment.model.CustomBillModel">
		SELECT cb.amount, DATE_FORMAT(cb.billdate,'%Y-%m-%d %H:%i:%s') billdate, cb.inorout, cb.billtype
		FROM pmappcustom c, pmappcustombill cb
		<where>
			cb.pmappcustom_id = c.id
			<if test="billType != null">
				AND cb.billtype = #{billType}
			</if>
			<if test="inorout != null">
				AND cb.inorout = #{inorout}
			</if>
			<if test="billDate != null">
				AND cb.billdate >= #{billDate}
			</if>
			<if test="appId != null">
				AND c.app_id = #{appId}
			</if>
			<if test="appUserId != null">
				AND c.app_user_id = #{appUserId}
			</if>
			<if test="appUserIdno != null">
				AND c.app_user_idno = #{appUserIdno}
			</if>
			ORDER BY cb.billdate DESC
		</where>
		
	</select>

</mapper>